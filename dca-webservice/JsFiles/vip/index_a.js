(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'");}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var clone=require("./modules/clone.js");var adsMod={clone:clone,
init:function(options,obj){var i,ads={},ids=[];for(i in obj){ads[i]=this.createCb(obj[i]);ids[ids.length]=i}options.type=ids.join(",");this.getData(options,function(re){for(i in ads)ads[i](re["AD"+i])})},createCb:function(callback){var self=this;return function(data){if(data&&(data.items&&data.items.length))callback.call(self,self.dataProcess(clone(data)))}},createImgLink:function(data,options){var tpl;if(!(data&&(data.items&&data.items.length)))return"";options=$.extend(options,{});data=data.items[0];
tpl='<a href="{$href}" {$target}><img src="{$img}" alt="{$name}"'+(options.noWidth?"":' width="{$width}"')+(options.noHeight?"":' height="{$height}"')+" /></a>";return $.Template({templateElement:tpl,replace:null}).process(data)},dataProcess:function(data){var i=0,len,list,item;list=data.items;len=list.length;for(;i<len;i++){item=list[i];if(item.link)item.href=item.link;else item.href="javascript:;";item.target=item.blank&&item.link?'target="_blank"':""}return data},addMars:function(data,mars,start){data=
data||{items:[]};start=start||0;var i=0,list=data.items,item,len=list.length,mark="{$i}",pf,sf;if(!(typeof mars==="string"&&mars.indexOf(mark)))return data;mars=mars.split(mark);start=start||1;pf=mars[0];sf=mars[1]||"";for(;i<len;i++){item=list[i];item.href=item.link+(item.link.indexOf("?")>0?"&":"?")+pf+start++ +sf}return data},getData:function(options,callback){var params=VIPSHOP.queryStringToJSON();options=$.extend({type:"",warehouse:$.Cookie.get("vip_wh"),areaid:$.Cookie.get("vip_province"),preview:params.preview||
"0",date_from:params.sell_time_from||"",time_from:params.time_from||"",user_class:params.page_code||""},options);$.ajax({url:"http://pcapi.vip.com/ads/index.php",data:options,cache:true,dataType:"jsonp",jsonpCallback:"shopAds",success:function(re){callback(re)},error:function(){VIPSHOP.log("\u83b7\u53d6\u6570\u636e\u5931\u8d25")}})}};module.exports=adsMod},{"./modules/clone.js":3}],2:[function(require,module,exports){function isNativeFunc(func){return typeof func==="function"&&/^[^{]+\{\s*\[native \w/.test(func)}
var _window=window,frame=_window.requestAnimationFrame||(_window.webkitRequestAnimationFrame||(_window.mozRequestAnimationFrame||(_window.oRequestAnimationFrame||_window.msRequestAnimationFrame))),supAsynImg=true;_window=null;function asynByImg(callback){var img=new Image;img.onload=img.onerror=img.onreadystatechange=function(){img=img.onload=img.onerror=img.onreadystatechange=null;callback()};img.src="data:image/png,"}asynByImg(function(){supAsynImg=false});var asynFire=isNativeFunc(window.Promise)&&
function(){var promise=Promise.resolve({then:function(callback){callback()}});return function(callback){promise.then(function(){callback()})}}()||(isNativeFunc(frame)&&function(callback){frame(callback)}||(supAsynImg&&asynByImg||function(){var _document=document,_body=_document.body,_src="data:text/javascript,",queue=[];return function(callback){var script=_document.createElement("script");script.src=_src;queue[queue.length]=callback;script.onload=script.onerror=script.onreadystatechange=function(){script.onload=
script.onerror=script.onreadystatechange=null;_body.removeChild(script);script=null;queue.shift()()};_body.appendChild(script)}}()));if(asynFire!==asynByImg)asynByImg=null;module.exports=asynFire},{}],3:[function(require,module,exports){var toString={}.toString;function clone(sourse){var key,copy,result,len;switch(toString.call(sourse)){case "[object Object]":result={};for(key in sourse){copy=sourse[key];if(copy===sourse)continue;result[key]=clone(copy)}return result;break;case "[object Array]":result=
[];key=0;len=sourse.length;for(;key<len;key++){copy=sourse[key];if(copy===sourse)continue;result[key]=clone(copy)}return result;break;default:return sourse}}module.exports=clone},{}],4:[function(require,module,exports){var nsCIBMod=require("./modules/cibMod.js"),adsMod=require("../../shop/adsMod.js"),loadImg=require("./modules/loadImgFunction.js"),scrollMod=require("./modules/ScrollListener.js"),isIE6=VIPSHOP.Detect.isIE6;var nsAdSense={init:function(){var self=this,rFirstAd={},rFourAd={},ids=[],
i,vipshopAds=window.vipshopAds||{};rFirstAd["ADSEC56K"]=adsMod.createCb(function(data){$.Listeners.pub("slideBanner").success({slideList:data})});rFourAd["ADSIR7IX"]=adsMod.createCb(function(data){$("#J_wrap_adBanner").html('<img src="'+data.items[0].img+'" alt="" width="1000" height="39" />').show("fast");$("#J_wrap_adBanner_wrap").show()});function showAnnounce(data,$target){$target.html($.Template({templateElement:$("#J-announceTpl"),replace:null}).process(data))}rFourAd["ADSX7W3G"]=adsMod.createCb(function(data){$("#J_top_ads").css({"backgroundImage":"url("+
data.items[0].img+")"}).height(80);$("#J_topAds_link").attr({"href":data.items[0].link,"title":data.items[0].title}).height(80);$("#J_topAds_img").remove()});rFourAd["ADSNNLS7"]=adsMod.createCb(function(data){var swfStr="",target;data=data.items[0];swfStr+='<a class="ad419_cover" href="'+data.href+'" '+data.target+' style="background:url(about:blank)"></a>';swfStr+='<object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8.0.35.0" width="1000" height="80">'+
'<param name="movie" value="'+data.img+'">'+'<param name="quality" value="high" />'+'<param name="wmode" value="transparent">'+'<embed src="'+data.img+'" type="application/x-shockwave-flash" width="1000" height="80" wmode="transparent" quality="high" />';+"</object>";$("#J_top_ads").html(swfStr).css({height:80});$("#J_top_close").on("click",function(){$("#J_top_ads").css({height:0})})});rFourAd["ADS44T33"]=adsMod.createCb(function(data){var RUID=$.Cookie.get("VipRUID");var T=new Date;var D=T.getDate();
var mark={};if($.Storage.get("dialogAd_a")[RUID]==D)return;loadImg(data.items[0].img,function(){var target="_self";if(data.items[0].blank)target="_blank";$.Listeners.sub("indexTmp.get.success").onsuccess(function(reIndex){var dialogAd=$.Dialog({content:reIndex["newDialogAd"],size:[800,400],model:true,opacity:0.8,elStyle:"dialogAd",custom:true,customStyle:true,clickMaskClose:true,showEvent:function(){$("#J_dialogAd_img").attr("src",data.items[0].img);$("#J_dialogAd_link").attr("href",data.items[0].link).attr("target",
target);$("#J_dialogAd_close").on("click.dialogAdClose",function(){dialogAd.close()})},closeEvent:function(){$("#J_dialogAd_close").off("click.dialogAdClose");this.destroy()}});$.Listeners.sub("choosePro").onsuccess(function(){dialogAd.open()});if($.Storage.get("vip_new_old_user"))dialogAd.open();mark[RUID]=D;$.Storage.set("dialogAd_a",mark,30*60*60)})})});rFourAd["ADS7JI3F"]=adsMod.createCb(function(data){$("#J_newVistor_banner_ad").css("background","url(about:blank)").html(this.createImgLink(data)).removeClass("hidden")});
rFourAd["ADSHS93V"]=function(data){if(data&&(data.items&&(data.items.length&&!$.Storage.get("AdNewuserClose"))))loadImg(data.items[0].img,function(){$.Listeners.sub("indexTmp.get.success").onsuccess(function(reIndex){var jqMy=$("body").append(reIndex["newUserTmp"]);var imgSrc=data.items[0].img;var jqAdNewUser=$("#J_ad_newuser");var jqAdNewUserImg=$("#J_ad_newuser_img");var jqAdNewUserReg=$("#J_ad_newuser_reg");var jqAdNewUserLogin=$("#J_ad_newuser_login");var jqAdNewuserClose=$("#J_ad_newuser_close");
var href=window.location.href;var encodeHref=encodeURIComponent(href);var userHost=VIPSHOP.userHost;var targets={reg:[userHost,"/register?src=",encodeHref],login:[userHost,"/login?src=",encodeHref]};var t=null;$(window).on("scroll.AdNewuser",function(){var sTop=$(this).scrollTop();if(4500>sTop&&sTop>=1E3){if(!t&&!$.Cookie.get("VipLID")){jqAdNewUser.show();jqAdNewUserImg.attr("src",imgSrc);timeout()}}else{jqAdNewUser.hide();t=clearTimeout(t)}}).trigger("scroll.AdNewuser");jqAdNewUserReg.on("click",
function(){loginDialog()});jqAdNewUserLogin.on("click",function(){loginDialog()});$("#J_ad_newuser_close, #J_sidebar_cnt li").on("click",function(){jqAdNewUser.remove();$(window).off("scroll.AdNewuser");$.Storage.set("AdNewuserClose","1",365*24*60*60)});jqAdNewUser.on({"mouseenter":function(){t=clearTimeout(t)},"mouseleave":function(){timeout()}});function timeout(){t=setTimeout(function(){jqAdNewUser.hide();clearTimeout(t)},1E3*10)}function loginDialog(){VIPSHOP.login.init({loginEvent:function(){location.href=
"http://www.vip.com"}})}})})};rFourAd["ADS2B669"]=function(data){if(data&&(data.items&&(data.items.length&&!$.Storage.get("AdNewuserBrandClose"))))loadImg(data.items[0].img,function(){$.Listeners.sub("indexTmp.get.success").onsuccess(function(reIndex){var jqBrand=$("body").append(reIndex["newUserBrandTmp"]);var jqAdNewUserBrand=$("#J_ad_newuser_brand");var jqAdNewUserBrandImg=$("#J_ad_newuser_brand_img");var jqAdNewuserBrandClose=$("#J_ad_newuser_brand_close");var jqAdNewuserBrandLink=$("#J_ad_newuser_brand_link");
var link=data.items[0].link;var target=data.items[0].blank?"_blank":"_self";var imgSrc=data.items[0].img;var t=null;jqAdNewUserBrandImg.attr("src",imgSrc);jqAdNewuserBrandLink.attr("href",link).attr("target",target);var eventId=scrollMod.add(function(status){if(status.y>4999)jqAdNewUserBrand.show();else jqAdNewUserBrand.hide()});$("#J_ad_newuser_brand_close, #J_sidebar_cnt li").on("click",function(){jqAdNewUserBrand.remove();scrollMod.remove(eventId);$.Storage.set("AdNewuserBrandClose","1",365*24*
60*60)})})})};if(!/iPad/i.test(navigator.userAgent))rFourAd["ADSITG64"]=adsMod.createCb(function(data){if(data&&(data.items.length>0&&!isIE6))if(!$.Storage.get("indexBottomFixAd")){$("#J-bottom-fix-ad").html(this.createImgLink(data));$("#J-bottom-fix-ad-wrap").show();$(".J-bottom-fix-ad-close").click(function(){$.Storage.set("indexBottomFixAd","1");$("#J-bottom-fix-ad-wrap").hide()})}});for(i in rFirstAd)ids[ids.length]=i;for(i in rFourAd)ids[ids.length]=i;for(i in vipshopAds)ids[ids.length]=i;adsMod.getData({type:ids.join(","),
channelId:O_query.channelId,warehouse:O_query.warehouse},function(re){var cloneData=adsMod.clone(re);for(i in rFirstAd)rFirstAd[i](re["AD"+i]);$.Listeners.sub("index.four").onsuccess(function(){for(i in rFourAd)rFourAd[i](re["AD"+i]);var defaultTab=re.DefaultTab?parseInt(re.DefaultTab,10)-1:0;$("#J_announce_list").Switchable({panelCls:"#J-noticeCont",triggerCls:"#J-noticeList",trigger:"over",interval:100,activeIndex:defaultTab,activeCls:"selected",delay:150});for(i in vipshopAds)vipshopAds[i](cloneData["AD"+
i])})})}};window.nsUE={feedback_pop:null,feedbackWrap:null,init:function(){var that=this;var preLoad={aPage:[24,1,15],bPage:[25,2,16],cPage:[26,3,17],list:[4,18],listOnSale:[6,19],beauty:[7,20],detail:[8,9,10,11,21],beautyDetail:[12,22]};var arr=[];for(var i in preLoad)arr=arr.concat(preLoad[i]);var ueData=$.Storage.get("ue-"+O_query.warehouse+"-"+arr.join("-"));var getData=function(cb){$.ajax({"url":"http://myopen.vip.com/my/ue/survey",data:{type:arr.join(","),warehouse:O_query.warehouse},jsonp:"callback",
cache:true,dataType:"jsonp",jsonpCallback:"getUE",success:function(res){$.Storage.set("ue-"+O_query.warehouse+"-"+arr.join("-"),res,30*60);var data=res.data;that.ueSuggestion(data["UE24"]).ueSurvey(data["UE1"]).ueFeedback(data["UE15"])}})};if(!!ueData){var data=ueData.data;that.ueSuggestion(data["UE24"]).ueSurvey(data["UE1"]).ueFeedback(data["UE15"])}else getData()},ueSuggestion:function(data){if(data&&data.items.length>0)$("#J_sbar_survey").parent().show();return this},ueSurvey:function(data){if(data&&
(data.items.length>0&&!isIE6)){var data=data.items[0];var img=new Image;img.onload=function(){var surveyWrap=$('<div class="ue_survey"></div>');var blank=data.blank==1?' target = "_blank"':"";var surveyLink="<a href="+data.link+blank+' title="'+data.text+'" style="height:'+img.height+'px"></a>';surveyWrap.append(surveyLink);$("body").append(surveyWrap);surveyWrap.css({"width":img.width,"height":img.height,"backgroundImage":"url("+data.img+")"})};img.src=data.img}return this},ueFeedback:function(data){if(data&&
(data.items.length>0&&!isIE6)){var data=data.items[0];var that=this;var feedbackWrap=$('<div class="feedback_wrap">\u9875\u9762\u610f\u89c1\u53cd\u9988</div>');var hasOpen=false;$("body").append(feedbackWrap);feedbackWrap.on({"mouseenter":function(){$(this).css("opacity",0.7)},"mouseleave":function(){$(this).css("opacity",1)},"click":function(){var feedback_pop;var ifrSrc=data.link;var feedback_pop_template='<div id="J_ue_feedback_pop" class="ue_feedback_pop">'+'<iframe id="J_feedback_iframe" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes" style="border:none; width:300px; height:360px" src="'+
ifrSrc+'">'+"</iframe>"+"</div>";feedback_pop=$(feedback_pop_template);$("body").append(feedback_pop);feedback_pop.css({"width":300,"height":360});$("#J_feedback_iframe").on("load",function(){feedback_pop.append('<div class="pop_close_btn"></div>');feedback_pop.find(".pop_close_btn").one("click",function(){that.closeFeedback()})});hasOpen=true;that.feedback_pop=feedback_pop;feedbackWrap.hide()}});if(data.before_show_time>0)setTimeout(function(){if(!hasOpen)feedbackWrap.trigger("click")},data.before_show_time*
1E3);that.feedbackWrap=feedbackWrap}return this},closeFeedback:function(){this.feedback_pop.remove();this.feedback_pop=null;this.feedbackWrap.show()}};$(function(){if(typeof c_VipNewUser!="undefined"&&!c_VipNewUser){var today=new Date;var get_over_time=new Date(today.getFullYear(),today.getMonth(),today.getDate());today.setTime(get_over_time.getTime()+34*60*60*1E3);document.cookie="VipNewUser=1;expires="+today.toGMTString()+";domain=vip.com;path=/"}$.Storage.set("vip_new_old_user",1,8760);nsAdSense.init();
$.Listeners.sub("ready.four").onsuccess(function(){nsUE.init()});$.Listeners.sub("ready.five").onsuccess(function(){nsCIBMod.init()})})},{"../../shop/adsMod.js":1,"./modules/ScrollListener.js":5,"./modules/cibMod.js":6,"./modules/loadImgFunction.js":7}],5:[function(require,module,exports){var asynFire=require("../../../shop/asynFire.js");var idPf=Math.random().toString(36).substr(2).substr(0,4)+"_",guid=1;var ScrollListener={nX:0,nY:0,change:false,wW:0,interval:0,resizeTimeout:0,eventId:".scrollListener",
inited:false,lazy:300,list:{},add:function(callback){var id,$window=$(window);if($.isFunction(callback)){if(!this.inited)this._init();id=idPf+guid++;this.list[id]=callback;asynFire(function(){callback({x:$window.scrollLeft(),y:$window.scrollTop(),right:true,down:true})});return id}return false},remove:function(id){var list=this.list;if(list[id]){list[id]=null;delete list[id];return true}return false},fire:function(x,y,right,down){var list=this.list,i,data={x:typeof x==="number"?x:$(window).scrollLeft(),
y:typeof y==="number"?y:$(window).scrollTop(),right:typeof right==="boolean"?right:true,down:typeof down==="boolean"?down:true};for(i in list)list[i](data);return this},setLazy:function(time){this.lazy=time;if(this.inited)this._removeInterval()._addInterval();return this},_init:function(){if(this.inited)return this;this.wW=$(window).width();this._addEvent()._addInterval();this.inited=true;return this},_determine:function(){var $window,oX,oY,nX,nY;if(this.change){this.change=false;$window=$(window);
oX=this.nX;oY=this.nY;nX=$window.scrollLeft();nY=$window.scrollTop();this.fire(nX,nY,nX>oX,nY>oY);this.nX=nX;this.nY=nY}},_resizeHandle:function(){var self=this;clearTimeout(self.resizeTimeout);self.resizeTimeout=setTimeout(function(){var $window=$(window),wW=self.wW,nWw=$window.width(),nX=$window.scrollLeft(),nY=$window.scrollTop();self.nX=nX;self.nY=nY;self.wW=nWw;self.fire(nX,nY,nWw>wW,nWw>wW)},200)},_addEvent:function(){var self=this;$(window).on("scroll"+self.eventId,function(e){self.change=
true}).on("resize"+self.eventId,function(e){self._resizeHandle()});return this},_removeEvent:function(){$(window).off(this.eventId);return this},_addInterval:function(){var self=this;self.interval=setInterval(function(){self._determine()},self.lazy);return this},_removeInterval:function(){clearInterval(this.interval);this.interval=null;return this},destroy:function(){this._removeEvent()._removeInterval();this.inited=false;this.list={};return this}};module.exports=ScrollListener},{"../../../shop/asynFire.js":2}],
6:[function(require,module,exports){var cibMod={init:function(){var self=this;if($.Cookie.get("jump_from_cib")==="1"){$.Loader.style("http://shop.cib.com.cn/customer/cibshop.css");self.showHeader();$.Listeners.sub("footerShow").onsuccess(function(){$.Listeners.unsub("footerShow").success();self.showFooter()})}},showHeader:function(){$("body").prepend('<div id="cib_bank"></div>');$.getScript("http://shop.cib.com.cn/customer/cibHeader.js")},showFooter:function(){var cibFoot=$('<div id="cib-foot" style="background:#FFF;"><iframe allowTransparency="true" width="980" frameborder="0" scrolling="NO"  src="http://shop.cib.com.cn/bottom.html"></iframe></div>');
$(".footer_img").css({"paddingBottom":12});cibFoot.css({"paddingBottom":typeof user_type_a!=="undefined"?73:0});$("#footer").append(cibFoot)}};module.exports=cibMod},{}],7:[function(require,module,exports){function loadImg(src,success,error){var img,processed;if(!src)return;if(typeof success!=="function")success=$.noop;if(typeof error!=="function")error=$.noop;img=new Image,processed=false;function end(){processed=true;img.onload=img.onerror=null}img.onload=function(){end();success(img);img=null};
img.onerror=function(){end();error(img);img=null};img.src=src;if(!processed&&img.complete){end();success(img);img=null}}module.exports=loadImg},{}]},{},[4]);
