this.JSON2||(this.JSON2={}),function(){function e(e){return 10>e?"0"+e:e}function t(t,r){var n=Object.prototype.toString.apply(t);return"[object Date]"===n?isFinite(t.valueOf())?t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z":null:"[object String]"===n||"[object Number]"===n||"[object Boolean]"===n?t.valueOf():"[object Array]"!==n&&"function"==typeof t.toJSON?t.toJSON(r):t}function f(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(e,r){var n,i,s,l,v,h=a,m=r[e];switch(m&&"object"==typeof m&&(m=t(m,e)),"function"==typeof u&&(m=u.call(r,e,m)),typeof m){case"string":return f(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(a+=o,v=[],"[object Array]"===Object.prototype.toString.apply(m)){for(l=m.length,n=0;l>n;n+=1)v[n]=c(n,m)||"null";return s=0===v.length?"[]":a?"[\n"+a+v.join(",\n"+a)+"\n"+h+"]":"["+v.join(",")+"]",a=h,s}if(u&&"object"==typeof u)for(l=u.length,n=0;l>n;n+=1)"string"==typeof u[n]&&(i=u[n],s=c(i,m),s&&v.push(f(i)+(a?": ":":")+s));else for(i in m)Object.prototype.hasOwnProperty.call(m,i)&&(s=c(i,m),s&&v.push(f(i)+(a?": ":":")+s));return s=0===v.length?"{}":a?"{\n"+a+v.join(",\n"+a)+"\n"+h+"}":"{"+v.join(",")+"}",a=h,s}}var a,o,u,n=(new RegExp("[\x00颅貈-貏軓釣瘁灥鈥�-鈥廫u2028-鈥仩-鈦豢锟�-锟縘","g"),'\\\\\\"\x00--聼颅貈-貏軓釣瘁灥鈥�-鈥廫u2028-鈥仩-鈦豢锟�-锟縘'),i=new RegExp("["+n,"g"),s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof JSON2.stringify&&(JSON2.stringify=function(e,t,r){var n;if(a="",o="","number"==typeof r)for(n=0;r>n;n+=1)o+=" ";else"string"==typeof r&&(o=r);if(u=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return c("",{"":e})})}(),function(e){"use strict";function u(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function f(){var n,e="8.0",t=navigator.userAgent.toLowerCase(),r=t.indexOf("msie")>-1;return r&&(n=t.match(/msie ([\d.]+)/)[1],e>=n)?!0:!1}function c(e){return"undefined"!=typeof e}function h(e){return"string"==typeof e||e instanceof String}function v(e){return"object"==typeof e}function m(e){if(!e)return!0;if(h(e)){var t=e.replace(/(\s*$)/g,"");return t.length>0?!1:!0}return!1}function y(){this.key,this.value,this.time=n,this.exps=31536e7,this.ver="v3.2",this.init=function(e){if(h(e)&&""!=e){var t=e.split(",");return this.ver=t[0],this.key=t[1],this.value=t[2],this.time=parseInt(t[3]),this.exps=parseInt(t[4]),!0}return!1},this.isOutTime=function(){return n-this.time>this.exps},this.toStr=function(){return this.ver+","+this.key+","+this.value+","+this.time+","+this.exps}}function C(e){var t=u({mothed:"err",emsg:e.message,ename:e.name,estock:e.stack},_);x.send(i.trackUrl,t,O)}function b(e,t,r){function n(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t=t+"&"+r,void 0!==e[r]&&(t=t+"="+encodeURIComponent(e[r])));return t}if(this.url=e,this.para=t,this.cb=r,this.query="",this.para&&(this.query=n(this.para),this.query.length+this.url.length>2e3)){var i=this.para;i.hasOwnProperty("title")&&(i.title=void 0),i.hasOwnProperty("keywords")&&(i.keywords=void 0),this.query=n(i)}}function j(){function n(t){var r;r=-1==t.url.indexOf("?")?t.url+"?"+t.query:t.url+t.query;var n=e.imgLogData||(e.imgLogData={}),i=new Date,o=n[i]=new Image;o.src=("https:"==d.location.protocol?"https://":"http://")+r,o.onload=o.onerror=function(){t.cb&&t.cb.call(),a(),delete n[i]},o=null}function i(e){function o(){4==t.readyState&&(e.cb&&e.cb.call(),a())}var t=!1;try{t=new XMLHttpRequest}catch(r){try{t=new ActiveXObject("MSXML2.XMLHTTP")}catch(n){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){return}}}null!=t&&(t.open("post",("https:"==d.location.protocol?"https://":"http://")+e.url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(e.query),t.onreadystatechange=o)}function a(){if(r=!0,0==t.length)return void(r=!1);var e=t.shift();e.query.length+e.url.length>2e3&&f()?i(e):n(e)}var t=[],r=!1;this.send=function(e,n,i){var o=new b(e,n,i);t.push(o),r||a()}}function S(e){var e=e||"";return e+Math.round(2147483647*(Math.random()||.5))*+new Date%1e10}function O(){function t(t){var r=(new Date).getTime(),n=w.get_Cookie(t),i=null;return n&&n.ver==e&&r-n.value&&r-n.value<6048e5?i=null:(i=new y,i.ver=e,i.key=t,i.value=r),i}function s(){for(var e in a)x.send(a[e]+"&p="+i+"&random="+S())}if("https:"!=d.location.protocol){var e="v3.4",r="cm",n=t(r),i=_.host,a=function(){return"https:"==d.location.protocol?[]:["cm.mjoys.com/qq.html?time="+(new Date).getTime(),"cm.g.doubleclick.net/pixel?google_nid=mjoys&google_cm&google_sc&google_ula="+_.ula,"cm.mjoys.com/tanxr.html?ula="+_.ula,"cm.pos.baidu.com/pixel?dspid=10347221&ext_data=ula="+_.ula]}();n&&(w.setCookie(n),s())}}function T(e){var t=d.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:function(e){return e=e.match(/[-a-z0-9]+\.(com|cn|com\.cn|me|org|cc|info|net|net\.cn)(?=$)/gi),e&&e.length>0&&(e=e[0]),e}(t.hostname),port:t.port,query:t.search,params:function(){for(var a,e={},r=t.search.replace(/^\?/,"").split("&"),n=r.length,i=0;n>i;i++)r[i]&&(a=r[i].split("="),e[a[0]]=a[1]);return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}}function q(e,r,n){if(e){h(e)&&(n=r,r=e,e=t);try{if(e===t)return D[r]=D[r]||[],void D[r].unshift(n);e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent("on"+r,n)}catch(i){}}}function A(e){var t=D[e];if(t){for(var r=[],n=arguments,i=1,a=n.length;a>i;i++)r.push(n[i]);for(var o=0,s=t.length;s--;)t[s].apply(this,r)&&o++;return o}}function z(){try{var e,t,r;for(e=0;e<arguments.length;e+=1)r=arguments[e],t=r.shift(),c(U[t])?U[t].push.apply(U[t],r):(r.unshift(t),U["default"].push.apply(U["default"],r))}catch(n){C(n)}}function P(){return{push:z}}function $(e,t){this.name=e,this.fields=[],this.url=t||i.trackUrl,U[e]=this}function I(){a&&new Date-o<50||s||(s=!0,M.send("unload"))}var t=e._mjoy||(e._mjoy=[]);if(!e._mjoy_ma){e._mjoy_ma=1;var o,s,r=!1,n=(new Date).getTime(),i={version:"v3.2",trackUrl:"fx.mjoys.com/at.gif"},a=e.attachEvent&&!e.opera,p=1,d=function(){var t;try{t=e.top.document}catch(r){if(p=2,e.parent)try{t=e.parent.document}catch(n){t=""}}return""===t&&(t=document),t}(),g=function(){var t;try{t=e.top.location.hostname}catch(r){t=e.location.hostname}return t=t.match(/[-a-z0-9]+\.(com|cn|com\.cn|me|org|cc|info|net|net\.cn)(?=$)/gi),t&&t.length>0&&(t=t[0]),t}(),w={values:{},init:function(){var e=this.readCookie("_mj_c");if(null===e){if(null!=this.readCookie("rtb")){var t=new y;t.key="rtb",t.value=this.readCookie("__mj_rtb_"),t.exps=864e5,this.values.rtb=t,this.writeCookie([["__mj_rtb_",0]],1)}if(null!=this.readCookie("cm")){var r=new y;r.key="cm",r.value=this.readCookie("__mj_cm_"),r.ver="v3.4",this.values.cm=r,this.writeCookie([["__mj_cm_",0]],1)}}else{var n=e.split("|");for(var i in n){var a=new y;a.init(n[i])&&(a.isOutTime()||(this.values[a.key]=a))}}this.write()},readCookie:function(e){var t=e||this.rdCookieKey,r=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null===r?null:unescape(r[2])},writeCookie:function(e,t){if(!f()){for(var n="/",i=new Date,a=t||31536e7,o="",s=0;s<e.length;s++)o=o+e[s][0]+"="+e[s][1]+";";a>0?(i.setTime(i.getTime()+a),d.cookie=o+"expires="+i.toGMTString()+";path="+n+";domain="+g):d.cookie=o+";path="+n+";domain="+g}},write:function(){var e="";for(var t in this.values)this.values.hasOwnProperty(t)&&(e.length>0&&(e+="|"),e+=this.values[t].toStr());e.length>0&&this.writeCookie([["_mj_c",e]])},get_Cookie:function(e){return this.values[e]?this.values[e]:(this.init(),this.values[e]?this.values[e]:null)},setCookie:function(e){this.values[e.key]=e,this.write()}},k=w.get_Cookie("last");null==k&&(k=new y,k.key="last",k.value=0);var _=function(){try{var r,a,o,s,t=navigator,u={},f=e.location;r=f.host,a=f.pathname,o=f.search.substr(1),s=f.hash,o&&function(){for(var e=o.split("&"),t=0,r=e.length;r>t;t++)if(-1!=e[t].indexOf("=")){var n=e[t].indexOf("="),i=e[t].slice(0,n),a=e[t].slice(n+1);u[i]=a}}();var c=d.referrer,l=function(){var e=!1,t=function(e){return m(e)?"":T(e).host}(c);t!=g&&(e=!0),n-k.value>18e5&&(e=!0),k.value=n,w.setCookie(k);var r=w.readCookie("_mj_si");return(e||null==r)&&(r=S("si"),w.writeCookie([["_mj_si",r]],-1)),r}();return{host:r,os:t.platform,lang:t.language||t.browserLanguage,inSize:d.body.clientWidth+"x"+d.body.clientHeight,outSize:e.screen.width+"x"+e.screen.height,charset:d.charset||d.characterSet,title:d.title,ver:i.version,loadtime:n,rd:S("rd"),flag:p,keywords:function(){for(var e="",t=0,r=["Keywords","keywords","KeyWords","keyWords"],n=r.length;n>t;t++)for(var i=0,a=d.getElementsByName(r[t]),o=a.length;o>i;i++)e+=a[i].content;return e}(),referer:c,rtbid:function(){var e=u.rtbid||void 0;if(e){var t=new y;return t.key="rtb",t.value=e,t.exps=864e5,w.setCookie(t),e}return e=w.get_Cookie("rtb"),null===e?"":e.value}(),ula:"1910063",si:l}}catch(h){C(h)}}(),x=new j;O();var E={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",encode:function(e){return this.baseEncode(this.utf16to8(e))},baseEncode:function(e){var t,r,n,i,a,o;for(n=e.length,r=0,t="";n>r;){if(i=255&e.charCodeAt(r++),r==n){t+=this.encodeChars.charAt(i>>2),t+=this.encodeChars.charAt((3&i)<<4),t+="==";break}if(a=e.charCodeAt(r++),r==n){t+=this.encodeChars.charAt(i>>2),t+=this.encodeChars.charAt((3&i)<<4|(240&a)>>4),t+=this.encodeChars.charAt((15&a)<<2),t+="=";break}o=e.charCodeAt(r++),t+=this.encodeChars.charAt(i>>2),t+=this.encodeChars.charAt((3&i)<<4|(240&a)>>4),t+=this.encodeChars.charAt((15&a)<<2|(192&o)>>6),t+=this.encodeChars.charAt(63&o)}return t},utf16to8:function(e){var t,r,n,i;for(t="",n=e.length,r=0;n>r;r++)i=e.charCodeAt(r),i>=1&&127>=i?t+=e.charAt(r):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t}},D={},U=[];$.prototype.push=function(e,t){if(h(e)){var r={};r[e]=t,this.fields.push(r)}else v(e)&&(e instanceof Array?this.fields=this.fields.concat(e):this.fields.push(e));A.apply(this,[this.name+".push",e,t])},$.prototype.send=function(e){var t=u({item:E.encode(JSON2.stringify(this.fields))},_);t.mothed=e,t.time=(new Date).getTime()-n,t.time<0&&(t.time=0),x.send(this.url,t)},$.prototype.lazySend=function(e){var t=this;r?this.send(e):setTimeout(function(){t.lazySend(e)},100)},$.prototype.on=function(e,t){q(this.name+"."+e,t)},new $("default").on("push",function(e,t){h(e)&&(_[e]=t)});var M=new $("_item");new $("_order").on("push",function(){if(0!=this.fields.length){var e=this.fields.pop();if(m(e.order.id)){e.order.id=S("o");var t=new y;t.key="od",t.value=e.order.id,t.exps=6e5,w.setCookie(t)}m(e.order.fm)||(_.fm=e.order.fm),this.fields.push(e),this.lazySend("order")}}),new $("_pay").on("push",function(){var e=this.fields.pop();if(m(e.order.id)){var t=w.get_Cookie("od");t||(t={value:S("o")}),e.order.id=t.value}m(e.order.fm)||(_.fm=e.order.fm),this.fields.push(e),this.lazySend("pay")}),new $("_addCart").on("push",function(){this.lazySend("addCart")}),new $("_love").on("push",function(){this.lazySend("collect")}),new $("_andCart").on("push",function(){this.lazySend("addCart")});for(var N=0;N<t.length;N++)z(t[N]);a&&q(d,"mouseup",function(e){var t=e.target||e.srcElement;1===t.nodeType&&/^ajavascript:/i.test(t.tagName+t.href)&&(o=new Date)}),q(e,"beforeunload",I),q(e,"unload",I),M.send("load"),e._mjoy=t=new P,r=!0}}(window);
$.Listeners && $.Listeners.pub('vtm_000031.loaded').success();